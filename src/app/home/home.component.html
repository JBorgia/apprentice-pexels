<section class="padding-y-lg">
  <div
  class="container max-width-adaptive-lg"
  infiniteScroll
  [infiniteScrollDistance]="2"
  [infiniteScrollDisabled]="isPauseScroll"
  (scrolled)="onScroll()">
    <div class="gallery">

      <ng-container *ngIf="posts$ | async as pexelColumns">

        <div class="gallery__column" *ngFor="let pexelColumn of pexelColumns; let i = index">
          <div
            class="gallery__item gallery__loading"
            *ngFor="let pexelPhoto of pexelColumn"
            [ngStyle]="{ 'padding-top': pexelPhoto.aspectRatioPadding + '%'}">

            <!-- Link Markup -->
            <a class="gallery__link" [routerLink]="" (click)="open(modalTemplate)">
              <img class="gallery__image"
                srcset="{{pexelPhoto.imageMap.toString()}}"
                sizes="{{pexelPhoto.imageSize.toString()}}"
                [src]="pexelPhoto.src.original">
            </a>

            <!-- Modal Template -->
            <ng-template #modalTemplate>
              <header class="modal__header bg-contrast-lower padding-y-sm padding-x-md flex items-center justify-between shadow-md">
                <div>
                  <h4 class="text-truncate">{{ pexelPhoto.photographer }}</h4>
                </div>
                <div class="flex justify-end gap-xs">
                  <button class="btn btn--primary">Download</button>
                </div>
              </header>
              <div class="padding-md">
                <img class="gallery__image"
                  srcset="{{pexelPhoto.imageMap.toString()}}"
                  sizes="{{pexelPhoto.imageSize.toString()}}"
                  [src]="pexelPhoto.src.original">
              </div>
            </ng-template>
          </div>
        </div>

      </ng-container>

    </div>
  </div>
</section>

<a class="button__pause" [routerLink] (click)='isPauseScroll = !isPauseScroll'>
  <svg class="icon" viewBox="0 0 16 16" *ngIf="!isPauseScroll">
    <line fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="10.1" y1="13.3" x2="10.1" y2="2.7"/>
    <line fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="5.9" y1="13.3" x2="5.9" y2="2.7"/>
  </svg>
  <svg class="icon" viewBox="0 0 16 16" *ngIf="isPauseScroll">
    <polygon fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="3.5,14.9 13.9,8 3.5,1.1"/>
  </svg>
</a>

<lib-back-to-top></lib-back-to-top>

<ng-template #imageLoadingTemplate>
  <div class="gallery__loading"></div>
</ng-template>
